"use strict";(self.webpackChunkengineering_playbook=self.webpackChunkengineering_playbook||[]).push([[6744],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return c}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=s(n),c=l,h=d["".concat(u,".").concat(c)]||d[c]||m[c]||r;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function c(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},17:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return u},metadata:function(){return s},assets:function(){return p},toc:function(){return m},default:function(){return c}});var a=n(7462),l=n(3366),r=(n(7294),n(3905)),i=["components"],o={},u="[Ruby](/engineering-playbook/docs/developing/languages/ruby/) / Installation",s={unversionedId:"developing/languages/ruby/installation",id:"developing/languages/ruby/installation",title:"[Ruby](./README.md) / Installation",description:"Context",source:"@site/docs/developing/languages/ruby/installation.md",sourceDirName:"developing/languages/ruby",slug:"/developing/languages/ruby/installation",permalink:"/engineering-playbook/docs/developing/languages/ruby/installation",editUrl:"https://github.com/trussworks/Engineering-Playbook/edit/main/docs/developing/languages/ruby/installation.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Ruby",permalink:"/engineering-playbook/docs/developing/languages/ruby/"},next:{title:"[Tools and Practice](../README.md) / Learning Resources",permalink:"/engineering-playbook/docs/developing/learning/"}},p={},m=[{value:"Context",id:"context",level:2},{value:"Approaches",id:"approaches",level:2},{value:"Limited to one version of Ruby at a time",id:"limited-to-one-version-of-ruby-at-a-time",level:3},{value:"Allows switching between multiple versions of Ruby",id:"allows-switching-between-multiple-versions-of-ruby",level:3},{value:"The Trussel Way",id:"the-trussel-way",level:2},{value:"Local installation",id:"local-installation",level:3},{value:"What to do if you already have RVM or rbenv",id:"what-to-do-if-you-already-have-rvm-or-rbenv",level:3},{value:"Uninstall RVM",id:"uninstall-rvm",level:4},{value:"Uninstall rbenv",id:"uninstall-rbenv",level:4},{value:"Using Ruby via Docker",id:"using-ruby-via-docker",level:3},{value:"Ruby managers",id:"ruby-managers",level:3}],d={toc:m};function c(e){var t=e.components,n=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ruby--installation"},(0,r.kt)("a",{parentName:"h1",href:"/engineering-playbook/docs/developing/languages/ruby/"},"Ruby")," / Installation"),(0,r.kt)("h2",{id:"context"},"Context"),(0,r.kt)("p",null,"Installing and configuring Ruby on a Mac is a common source of confusion and\nfrustration for folks of all experience levels due to inconsistent and\nincomplete instructions found online."),(0,r.kt)("p",null,"Although macOS ships with Ruby, it is not recommended to use it for development\nfor several reasons:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"It is usually an older version, and is only updated as part of a major macOS\nrelease.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Installing gems in the system Ruby requires the use of ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo"),". In general, it\nshould be assumed that everything under ",(0,r.kt)("inlineCode",{parentName:"p"},"/System/Library")," is part of macOS and\nis administered by Apple. Files in those directories should not be modified.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/macos_release_notes/macos_catalina_10_15_beta_9_release_notes"},"macOS will no longer include Ruby by default in future releases"),"."))),(0,r.kt)("h2",{id:"approaches"},"Approaches"),(0,r.kt)("h3",{id:"limited-to-one-version-of-ruby-at-a-time"},"Limited to one version of Ruby at a time"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install Ruby with homebrew")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install Ruby manually"))),(0,r.kt)("h3",{id:"allows-switching-between-multiple-versions-of-ruby"},"Allows switching between multiple versions of Ruby"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Install and configure a Ruby manager, then install Ruby")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use a vetted automated script that sets everything up for you"))),(0,r.kt)("h2",{id:"the-trussel-way"},"The Trussel Way"),(0,r.kt)("p",null,"For long-term day-to-day development, we recommend installing and using Ruby via\na Ruby manager. Inevitably, when working with Ruby projects, you will need to\ninstall multiple different versions at the same time and switch between them."),(0,r.kt)("p",null,"Depending on your preferences and needs, the two recommended ways to install and\nuse Ruby on a Mac are via local installation of a Ruby manager, or via Docker."),(0,r.kt)("p",null,"Reasons to use Docker:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You don't use Ruby regularly, and only need it occasionally, such as to\nreview candidate work samples"),(0,r.kt)("li",{parentName:"ul"},"You don't want to install anything locally")),(0,r.kt)("h3",{id:"local-installation"},"Local installation"),(0,r.kt)("p",null,"The easiest and most reliable way to install Ruby locally is via an automated\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/monfresh/install-ruby-on-macos"},"script")," which installs the following tools (only if you don't already have them):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://brew.sh/"},"Homebrew")),(0,r.kt)("li",{parentName:"ul"},"Apple Command Line Tools (note that you do not need the full Xcode package)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/postmodern/chruby"},"chruby")," (our recommended Ruby manager)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/postmodern/ruby-install"},"ruby-install")," (chruby's companion\ntool for installing different Ruby versions)"),(0,r.kt)("li",{parentName:"ul"},"The latest version of Ruby at the time you run the script"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://bundler.io/"},"bundler"))),(0,r.kt)("p",null,"The script also updates your shell startup file (such as ",(0,r.kt)("inlineCode",{parentName:"p"},".bash_profile"),") to\nproperly configure ",(0,r.kt)("inlineCode",{parentName:"p"},"chruby"),"."),(0,r.kt)("h3",{id:"what-to-do-if-you-already-have-rvm-or-rbenv"},"What to do if you already have RVM or rbenv"),(0,r.kt)("p",null,"We recommend uninstalling them before running the script."),(0,r.kt)("h4",{id:"uninstall-rvm"},"Uninstall RVM"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"rvm implode\n")),(0,r.kt)("p",null,"Other directories that might need to be removed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.rvm")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.rvmrc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"/etc/rvm"))),(0,r.kt)("p",null,"Remove any ",(0,r.kt)("inlineCode",{parentName:"p"},"RVM"),"-related lines from the following files:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.bashrc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.bash_profile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.profile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zshrc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zprofile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zshenv"))),(0,r.kt)("p",null,"Quit and relaunch Terminal/iTerm"),(0,r.kt)("h4",{id:"uninstall-rbenv"},"Uninstall rbenv"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"rm -rf ~/.rbenv\n")),(0,r.kt)("p",null,"or"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"brew uninstall rbenv\n")),(0,r.kt)("p",null,"Remove any ",(0,r.kt)("inlineCode",{parentName:"p"},"rbenv"),"-related lines from the following files:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.bashrc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.bash_profile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.profile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zshrc")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zprofile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"~/.zshenv"))),(0,r.kt)("p",null,"Quit and relaunch Terminal/iTerm"),(0,r.kt)("h3",{id:"using-ruby-via-docker"},"Using Ruby via Docker"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/trussworks/Engineering-Playbook/tree/master/developing/docker#installation"},"Install Docker")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"cd")," into the directory of the Ruby project you want to work with"),(0,r.kt)("li",{parentName:"ol"},"Run a bash shell in Docker: ",(0,r.kt)("inlineCode",{parentName:"li"},"docker run -it --rm=true -v $PWD:$PWD -w $PWD ruby:${DESIRED_RUBY_VERSION}-slim bash"))),(0,r.kt)("p",null,"For example, if you want an image with Ruby 2.6.4, you would run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker run -it --rm=true -v $PWD:$PWD -w $PWD ruby:2.6.4-slim bash\n")),(0,r.kt)("h3",{id:"ruby-managers"},"Ruby managers"),(0,r.kt)("p",null,"The most popular tools that allow you to manage multiple installations of Ruby\nand switch between them are: RVM, rbenv, and chruby. We recommend\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/postmodern/chruby"},"chruby")," because it is the smallest and\neasiest to understand. We like that it does not do some of the things that other\ntools do:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Does not hook ",(0,r.kt)("inlineCode",{parentName:"li"},"cd"),"."),(0,r.kt)("li",{parentName:"ul"},"Does not install executable shims."),(0,r.kt)("li",{parentName:"ul"},"Does not require Rubies be installed into your home directory."),(0,r.kt)("li",{parentName:"ul"},"Does not automatically switch Rubies by default."),(0,r.kt)("li",{parentName:"ul"},"Does not require write-access to the Ruby directory in order to install gems.")),(0,r.kt)("p",null,"References:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://kgrz.io/programmers-guide-to-choosing-ruby-version-manager.html"},"https://kgrz.io/programmers-guide-to-choosing-ruby-version-manager.html")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://stevemarshall.com/journal/why-i-use-chruby/"},"https://stevemarshall.com/journal/why-i-use-chruby/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://linhmtran168.github.io/blog/2014/02/27/moving-from-rbenv-to-chruby/"},"https://linhmtran168.github.io/blog/2014/02/27/moving-from-rbenv-to-chruby/"))))}c.isMDXComponent=!0}}]);